---
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'a'> {
    after?: boolean;
}

const { href, after = false, ...props } = Astro.props;

const url = new URL(href as string);
const src = `https://favicon.garden/${url.hostname}`
---
<a href={href} {...props}>
    {after && <slot />}<img onerror="this.style.display='none';" src={src} loading="lazy" alt="" aria-hidden="true" class="favicon"/>{!after && <slot />}
</a>
<style>
    a { display:inline-flex; align-items: center; }
    img { width: 1em; height: 1em; object-fit: contain; }
</style>